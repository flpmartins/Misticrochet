<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Misticrochet - Artesanato em croch√™ m√≠stico e delicado. Pe√ßas √∫nicas feitas com amor e dedica√ß√£o.">
    <meta name="keywords" content="croch√™, artesanato, pe√ßas artesanais, croch√™ m√≠stico, handmade">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Misticrochet - Artesanato em Croch√™ M√≠stico">
    <meta property="og:description" content="Pe√ßas √∫nicas em croch√™ feitas com amor e dedica√ß√£o. Artesanato m√≠stico e delicado.">
    <meta property="og:image" content="assets/logo.jpeg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Misticrochet - Artesanato em Croch√™ M√≠stico">
    <meta property="twitter:description" content="Pe√ßas √∫nicas em croch√™ feitas com amor e dedica√ß√£o. Artesanato m√≠stico e delicado.">
    <meta property="twitter:image" content="assets/logo.jpeg">
    
    <title>Misticrochet - Artesanato em Croch√™ M√≠stico</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        // Aguardar EmailJS carregar completamente
        window.addEventListener('DOMContentLoaded', function() {
            if (typeof emailjs !== 'undefined') {
                console.log('EmailJS carregado com sucesso');
            }
        });
    </script>
    <script src="config.js"></script>
</head>
<body>
    <!-- Header / Navigation -->
    <header class="header" id="header">
        <nav class="navbar container">
            <a href="#inicio" class="navbar-logo" aria-label="Voltar ao in√≠cio">
                <img src="assets/logo.jpeg" alt="Logo Misticrochet" class="logo-small">
                <span class="logo-text">Misticrochet</span>
            </a>
            <button class="navbar-toggle" aria-label="Menu de navega√ß√£o" aria-expanded="false" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="navbar-menu" id="navbarMenu">
                <li><a href="#inicio" class="nav-link">In√≠cio</a></li>
                <li><a href="#produtos" class="nav-link">Produtos</a></li>
                <li><a href="#sobre" class="nav-link">Sobre</a></li>
                <li><a href="#depoimentos" class="nav-link">Depoimentos</a></li>
                <li><a href="#contato" class="nav-link">Contato</a></li>
                <li>
                    <button class="theme-toggle" id="themeToggle" aria-label="Alternar tema claro/escuro" title="Alternar tema">
                        <span class="theme-icon">üåô</span>
                    </button>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="inicio">
        <div class="container">
            <div class="hero-content">
                <img src="assets/logo.jpeg" alt="Logo Misticrochet - Gato m√≠stico com fios de croch√™" class="hero-logo" aria-label="Logo da marca Misticrochet">
                <h1 class="hero-title">Misticrochet</h1>
                <p class="hero-subtitle">Croch√™ m√≠stico e delicado feito com amor</p>
                <p class="hero-description">Pe√ßas √∫nicas em croch√™ que trazem magia e carinho para o seu dia a dia</p>
                <a href="#produtos" class="btn btn-primary" aria-label="Ver nossos produtos">Conhe√ßa Nossos Produtos</a>
            </div>
        </div>
        <div class="hero-decoration"></div>
    </section>

    <!-- Produtos Section -->
    <section class="produtos" id="produtos">
        <div class="container">
            <h2 class="section-title">Nossos Produtos</h2>
            <p class="section-subtitle">Pe√ßas artesanais √∫nicas, feitas com carinho e dedica√ß√£o</p>
            
            <div class="produtos-grid">
                <article class="produto-card">
                    <div class="produto-image">
                        <img src="assets/amigurumi.jpeg" alt="Amigurumis m√≠sticos em croch√™ - bichinhos artesanais" class="produto-img" data-image-modal="assets/amigurumi.jpeg">
                    </div>
                    <div class="produto-content">
                        <h3 class="produto-title">Amigurumis M√≠sticos</h3>
                        <p class="produto-description">Bichinhos de croch√™ encantadores, perfeitos para decorar e presentear</p>
                        <span class="produto-price">Sob consulta</span>
                    </div>
                </article>

                <article class="produto-card">
                    <div class="produto-image">
                        <img src="assets/acessorios-delicados.jpeg" alt="Acess√≥rios delicados em croch√™ - bolsinhas e chaveiros" class="produto-img" data-image-modal="assets/acessorios-delicados.jpeg">
                    </div>
                    <div class="produto-content">
                        <h3 class="produto-title">Acess√≥rios Delicados</h3>
                        <p class="produto-description">Bolsinhas, chaveiros e outros acess√≥rios feitos com fios especiais</p>
                        <span class="produto-price">Sob consulta</span>
                    </div>
                </article>

                <article class="produto-card">
                    <div class="produto-image">
                        <img src="assets/pecas-personalizadas.jpeg" alt="Pe√ßas personalizadas em croch√™ sob medida" class="produto-img" data-image-modal="assets/pecas-personalizadas.jpeg">
                    </div>
                    <div class="produto-content">
                        <h3 class="produto-title">Pe√ßas Personalizadas</h3>
                        <p class="produto-description">Encomendas sob medida, criadas especialmente para voc√™</p>
                        <span class="produto-price">Sob consulta</span>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <!-- Sobre Section -->
    <section class="sobre" id="sobre">
        <div class="container">
            <h2 class="section-title">Sobre a Misticrochet</h2>
            <div class="sobre-content">
                <div class="sobre-text">
                    <div class="sobre-text-inner">
                        <p class="sobre-paragraph">
                            A <strong>Misticrochet</strong> nasceu do amor pelo artesanato e pela magia que cada ponto de croch√™ pode criar. 
                            Cada pe√ßa √© feita √† m√£o com muito carinho, aten√ß√£o aos detalhes e dedica√ß√£o.
                        </p>
                        <p class="sobre-paragraph">
                            Nossa miss√£o √© trazer um toque m√≠stico e delicado para o seu dia a dia atrav√©s de pe√ßas √∫nicas 
                            que combinam tradi√ß√£o artesanal com design moderno e minimalista.
                        </p>
                        <p class="sobre-paragraph">
                            Acreditamos que cada ponto conta uma hist√≥ria e cada pe√ßa carrega a energia positiva de quem a criou. 
                            Por isso, trabalhamos com materiais de qualidade e t√©cnicas que valorizam a beleza do artesanato manual.
                        </p>
                    </div>
                </div>
                <div class="sobre-decoration">
                    <div class="yarn-artwork" aria-hidden="true">
                        <div class="yarn-circle">
                            <div class="yarn-ring yarn-ring-1"></div>
                            <div class="yarn-ring yarn-ring-2"></div>
                            <div class="yarn-ring yarn-ring-3"></div>
                            <div class="yarn-center">
                                <div class="yarn-star star-1">‚ú¶</div>
                                <div class="yarn-star star-2">‚ú¶</div>
                                <div class="yarn-star star-3">‚ú¶</div>
                            </div>
                        </div>
                        <div class="yarn-ball"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Depoimentos Section -->
    <section class="depoimentos" id="depoimentos">
        <div class="container">
            <h2 class="section-title">O Que Nossos Clientes Dizem</h2>
            <div class="depoimentos-grid">
                <article class="depoimento-card">
                    <div class="depoimento-stars" aria-label="5 estrelas">
                        <span aria-hidden="true">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    </div>
                    <p class="depoimento-text">
                        "Kuromon perfeito! Acabamento impec√°vel e atendimento super atencioso. Amei!"
                    </p>
                    <p class="depoimento-author">‚Äî Filipe Martins</p>
                </article>

                <article class="depoimento-card">
                    <div class="depoimento-stars" aria-label="5 estrelas">
                        <span aria-hidden="true">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    </div>
                    <p class="depoimento-text">
                        "Ursinho maravilhoso! Delicado, macio e com √≥timo acabamento. Compra certeira!"
                    </p>
                    <p class="depoimento-author">‚Äî Filipe Martins</p>
                </article>
            </div>
        </div>
    </section>

    <!-- Contato Section -->
    <section class="contato" id="contato">
        <div class="container">
            <h2 class="section-title">Entre em Contato</h2>
            <p class="section-subtitle">Tire suas d√∫vidas ou fa√ßa sua encomenda personalizada</p>
            
            <div class="contato-content">
                <div class="contato-info">
                    <div class="info-card">
                        <div class="info-icon">‚úâÔ∏è</div>
                        <h3 class="info-title">E-mail</h3>
                        <a href="mailto:misticrochet47@gmail.com" class="info-link">
                            misticrochet47@gmail.com
                        </a>
                        <p class="info-description">Respondemos em at√© 24 horas</p>
                    </div>

                    <div class="info-card">
                        <div class="info-icon">üì±</div>
                        <h3 class="info-title">Redes Sociais</h3>
                        <div class="info-social">
                            <a href="https://www.instagram.com/misticrochet/" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Instagram">
                                Instagram
                            </a>
                            <a href="https://www.tiktok.com/@misticrochet?_r=1&_t=ZS-921sIsaZiMe" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="TikTok">
                                TikTok
                            </a>
                        </div>
                        <p class="info-description">Siga-nos para ver novidades</p>
                    </div>

                    <div class="info-card">
                        <div class="info-icon">‚è∞</div>
                        <h3 class="info-title">Hor√°rio de Atendimento</h3>
                        <p class="info-text">Segunda a Sexta: 9h √†s 18h</p>
                        <p class="info-text">S√°bado: 9h √†s 13h</p>
                        <p class="info-description">Encomendas personalizadas sob consulta</p>
                    </div>
                </div>

                <form class="contato-form" method="POST" aria-label="Formul√°rio de contato">
                    <div class="form-group">
                        <label for="nome" class="form-label">Nome</label>
                        <input 
                            type="text" 
                            id="nome" 
                            name="nome" 
                            class="form-input" 
                            required 
                            aria-required="true"
                            placeholder="Seu nome completo"
                        >
                    </div>

                    <div class="form-group">
                        <label for="email" class="form-label">E-mail</label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            class="form-input" 
                            required 
                            aria-required="true"
                            placeholder="seu@email.com"
                        >
                    </div>

                    <div class="form-group">
                        <label for="mensagem" class="form-label">Mensagem</label>
                        <textarea 
                            id="mensagem" 
                            name="mensagem" 
                            class="form-textarea" 
                            rows="5" 
                            required 
                            aria-required="true"
                            placeholder="Conte-nos sobre sua encomenda ou d√∫vida..."
                        ></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary btn-submit" aria-label="Enviar mensagem">
                        Enviar Mensagem
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="assets/logo.jpeg" alt="Logo Misticrochet" class="footer-logo" aria-label="Logo da marca Misticrochet">
                    <p class="footer-tagline">Artesanato m√≠stico e delicado</p>
                </div>
                
                <div class="footer-contact">
                    <h3 class="footer-title">Contato</h3>
                    <a href="mailto:misticrochet47@gmail.com" class="footer-email" aria-label="Enviar e-mail para misticrochet47@gmail.com">
                        misticrochet47@gmail.com
                    </a>
                </div>

                <div class="footer-social">
                    <h3 class="footer-title">Redes Sociais</h3>
                    <div class="social-links">
                        <a 
                            href="https://www.instagram.com/misticrochet/" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            class="social-link"
                            aria-label="Seguir no Instagram"
                        >
                            Instagram
                        </a>
                        <a 
                            href="https://www.tiktok.com/@misticrochet?_r=1&_t=ZS-921sIsaZiMe" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            class="social-link"
                            aria-label="Seguir no TikTok"
                        >
                            TikTok
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Misticrochet. Todos os direitos reservados.</p>
                <p>Feito com <span class="heart" aria-label="amor">‚ô•</span> e muito carinho</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Floating Button -->
    <a 
        href="https://wa.me/5519999669311?text=Ol√°!%20Vim%20atrav√©s%20da%20sua%20landing%20page%20e%20gostaria%20de%20saber%20mais%20sobre%20seus%20produtos.%20‚ú®ü©∑" 
        target="_blank" 
        rel="noopener noreferrer"
        class="whatsapp-button"
        aria-label="Fale conosco no WhatsApp"
        title="Fale conosco no WhatsApp"
    >
        <svg class="whatsapp-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
        <span class="whatsapp-pulse"></span>
    </a>

    <!-- Modal para Imagens dos Produtos -->
    <div class="image-modal" id="imageModal" role="dialog" aria-modal="true" aria-label="Visualiza√ß√£o de imagem do produto">
        <div class="image-modal-overlay" id="modalOverlay" aria-label="Fechar modal"></div>
        <div class="image-modal-content">
            <button class="image-modal-close" id="modalClose" aria-label="Fechar modal" type="button">√ó</button>
            <img class="image-modal-img" id="modalImage" src="" alt="Imagem ampliada do produto">
        </div>
    </div>

    <!-- Dialog de Agradecimento -->
    <div class="thank-you-dialog" id="thankYouDialog" role="dialog" aria-modal="true" aria-labelledby="thankYouTitle">
        <div class="thank-you-overlay" id="thankYouOverlay"></div>
        <div class="thank-you-content">
            <div class="thank-you-icon">‚ú®</div>
            <h3 class="thank-you-title" id="thankYouTitle">Obrigado pelo seu contato!</h3>
            <p class="thank-you-message">Recebemos sua mensagem e em breve retornaremos. Ficamos felizes em poder ajudar!</p>
            <button class="btn btn-primary thank-you-button" id="thankYouClose" type="button">Fechar</button>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Smooth scroll para links internos
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    // Fechar menu mobile se estiver aberto
                    const navMenu = document.getElementById('navbarMenu');
                    const navToggle = document.getElementById('navToggle');
                    if (navMenu.classList.contains('active')) {
                        navMenu.classList.remove('active');
                        navToggle.setAttribute('aria-expanded', 'false');
                    }
                }
            });
        });

        // Menu mobile toggle
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navbarMenu');
        
        if (navToggle) {
            navToggle.addEventListener('click', function() {
                const isExpanded = this.getAttribute('aria-expanded') === 'true';
                this.setAttribute('aria-expanded', !isExpanded);
                navMenu.classList.toggle('active');
            });
        }

        // Header scroll effect
        const header = document.getElementById('header');
        let lastScroll = 0;

        window.addEventListener('scroll', function() {
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > 100) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
            
            lastScroll = currentScroll;
        });

        // Dialog de Agradecimento
        const thankYouDialog = document.getElementById('thankYouDialog');
        const thankYouOverlay = document.getElementById('thankYouOverlay');
        const thankYouClose = document.getElementById('thankYouClose');

        // Declarar fun√ß√µes globalmente para serem acess√≠veis
        let openThankYouDialog, closeThankYouDialog;
        
        if (thankYouDialog && thankYouOverlay && thankYouClose) {
            openThankYouDialog = function() {
                thankYouDialog.classList.add('active');
                document.body.style.overflow = 'hidden';
                // Focar no bot√£o de fechar para acessibilidade
                setTimeout(() => thankYouClose.focus(), 100);
            };

            closeThankYouDialog = function() {
                thankYouDialog.classList.remove('active');
                document.body.style.overflow = '';
            };
            
            // Fechar dialog ao clicar no overlay, bot√£o ou tecla ESC
            thankYouOverlay.addEventListener('click', closeThankYouDialog);
            thankYouClose.addEventListener('click', closeThankYouDialog);
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && thankYouDialog.classList.contains('active')) {
                    closeThankYouDialog();
                }
            });
        } else {
            console.error('Elementos do dialog de agradecimento n√£o encontrados!');
            // Criar fun√ß√µes vazias para evitar erros
            openThankYouDialog = function() { console.warn('Dialog n√£o dispon√≠vel'); };
            closeThankYouDialog = function() { console.warn('Dialog n√£o dispon√≠vel'); };
        }

        // Configura√ß√£o do EmailJS est√° no arquivo config.js
        // As credenciais s√£o carregadas de config.js para n√£o ficarem expostas no c√≥digo principal
        
        // Verificar se EMAILJS_CONFIG foi carregado do config.js
        // O config.js declara EMAILJS_CONFIG como const, ent√£o n√£o podemos redeclarar
        // Apenas verificamos se existe e criamos um fallback se necess√°rio
        if (typeof EMAILJS_CONFIG === 'undefined') {
            console.error('Erro: config.js n√£o foi carregado. Verifique se o arquivo existe.');
            // Criar objeto padr√£o no window para evitar erros
            window.EMAILJS_CONFIG = {
                PUBLIC_KEY: 'YOUR_PUBLIC_KEY',
                SERVICE_ID: 'YOUR_SERVICE_ID',
                TEMPLATE_ID: 'YOUR_TEMPLATE_ID',
                TO_EMAIL: 'misticrochet47@gmail.com'
            };
        }
        
        // Usar a vari√°vel global (do config.js ou do fallback)
        // N√£o redeclarar, apenas referenciar
        const emailjsConfig = typeof EMAILJS_CONFIG !== 'undefined' ? EMAILJS_CONFIG : window.EMAILJS_CONFIG;
        
        // Inicializar EmailJS apenas se a chave p√∫blica estiver configurada
        // Aguardar o EmailJS estar totalmente carregado
        let emailjsReady = false;
        
        // Fun√ß√£o para inicializar EmailJS
        function initializeEmailJS() {
            const config = typeof EMAILJS_CONFIG !== 'undefined' ? EMAILJS_CONFIG : window.EMAILJS_CONFIG;
            if (config && config.PUBLIC_KEY && config.PUBLIC_KEY !== 'YOUR_PUBLIC_KEY') {
                try {
                    if (typeof emailjs !== 'undefined') {
                        // Na vers√£o 4 do EmailJS, a inicializa√ß√£o pode ser feita assim
                        emailjs.init(config.PUBLIC_KEY);
                        emailjsReady = true;
                        console.log('EmailJS inicializado com sucesso. Public Key:', config.PUBLIC_KEY.substring(0, 5) + '...');
                    } else {
                        console.error('EmailJS n√£o foi carregado. Verifique se o script est√° inclu√≠do.');
                    }
                } catch (error) {
                    console.error('Erro ao inicializar EmailJS:', error);
                }
            } else {
                console.warn('EmailJS n√£o configurado. Public Key n√£o encontrada.');
            }
        }
        
        // Tentar inicializar quando o DOM estiver pronto
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeEmailJS);
        } else {
            // DOM j√° est√° pronto
            setTimeout(initializeEmailJS, 100); // Pequeno delay para garantir que o script carregou
        }

        // Valida√ß√£o e envio do formul√°rio
        // Garantir que o formul√°rio existe antes de anexar o evento
        function setupFormHandler() {
            const contatoForm = document.querySelector('.contato-form');
            
            if (!contatoForm) {
                console.error('Formul√°rio n√£o encontrado!');
                return;
            }
            
            const submitButton = contatoForm.querySelector('.btn-submit');
            
            // Remover event listener anterior se existir (para evitar duplicatas)
            const newForm = contatoForm.cloneNode(true);
            contatoForm.parentNode.replaceChild(newForm, contatoForm);
            
            // Anexar evento ao novo formul√°rio
            const form = document.querySelector('.contato-form');
            const btn = form.querySelector('.btn-submit');
            
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('Formul√°rio submetido - prevenindo comportamento padr√£o');
                
                // Desabilitar bot√£o durante o envio
                const originalButtonText = btn.textContent;
                btn.disabled = true;
                btn.textContent = 'Enviando...';
            
            // Coletar dados do formul√°rio
            const formData = {
                nome: document.getElementById('nome').value.trim(),
                email: document.getElementById('email').value.trim(),
                mensagem: document.getElementById('mensagem').value.trim()
            };
            
            // Obter configura√ß√£o do EmailJS (do config.js ou fallback)
            const emailjsConfig = typeof EMAILJS_CONFIG !== 'undefined' ? EMAILJS_CONFIG : window.EMAILJS_CONFIG;
            
            // Verificar se EmailJS est√° configurado
            if (!emailjsConfig || emailjsConfig.PUBLIC_KEY === 'YOUR_PUBLIC_KEY' || 
                emailjsConfig.SERVICE_ID === 'YOUR_SERVICE_ID' || 
                emailjsConfig.TEMPLATE_ID === 'YOUR_TEMPLATE_ID') {
                
                // EmailJS n√£o configurado - usar fallback (mailto)
                const toEmail = emailjsConfig ? emailjsConfig.TO_EMAIL : 'misticrochet47@gmail.com';
                const mailtoLink = `mailto:${toEmail}?subject=Contato via Site - ${encodeURIComponent(formData.nome)}&body=${encodeURIComponent('Nome: ' + formData.nome + '\n\nEmail: ' + formData.email + '\n\nMensagem:\n' + formData.mensagem)}`;
                window.location.href = mailtoLink;
                
                // Mostrar dialog de agradecimento
                setTimeout(() => {
                    openThankYouDialog();
                    form.reset();
                    btn.disabled = false;
                    btn.textContent = originalButtonText;
                }, 500);
                
                return;
            }
            
            try {
                // Verificar se EmailJS est√° pronto
                if (!emailjsReady || typeof emailjs === 'undefined') {
                    throw new Error('EmailJS n√£o est√° inicializado. Verifique a configura√ß√£o.');
                }
                
                // Formatar mensagem completa com nome e email inclu√≠dos automaticamente
                // O nome e email ser√£o adicionados no in√≠cio da mensagem sem o cliente saber
                const mensagemCompleta = `Ol√°! Meu nome √© ${formData.nome} e meu email √© ${formData.email}.\n\n${formData.mensagem}`;
                
                // Obter configura√ß√£o do EmailJS
                const emailjsConfig = typeof EMAILJS_CONFIG !== 'undefined' ? EMAILJS_CONFIG : window.EMAILJS_CONFIG;
                
                // Verificar se as credenciais est√£o configuradas
                if (!emailjsConfig || !emailjsConfig.SERVICE_ID || !emailjsConfig.TEMPLATE_ID || 
                    emailjsConfig.SERVICE_ID === 'YOUR_SERVICE_ID' || 
                    emailjsConfig.TEMPLATE_ID === 'YOUR_TEMPLATE_ID') {
                    throw new Error('Credenciais do EmailJS n√£o configuradas corretamente.');
                }
                
                // Enviar email usando EmailJS
                // O EmailJS enviar√° um email para misticrochet47@gmail.com
                // com os dados do formul√°rio (nome e email j√° inclu√≠dos na mensagem)
                
                // Preparar par√¢metros do template
                const templateParams = {
                    from_name: formData.nome,
                    from_email: formData.email,
                    message: mensagemCompleta,  // Mensagem com nome e email inclu√≠dos automaticamente
                    to_email: emailjsConfig.TO_EMAIL,
                    reply_to: formData.email
                };
                
                console.log('Enviando email com par√¢metros:', {
                    service: emailjsConfig.SERVICE_ID,
                    template: emailjsConfig.TEMPLATE_ID,
                    params: templateParams
                });
                
                // Usar o m√©todo correto do EmailJS v4
                const response = await emailjs.send(
                    emailjsConfig.SERVICE_ID,
                    emailjsConfig.TEMPLATE_ID,
                    templateParams
                );
                
                console.log('Email enviado com sucesso:', response);
                
                // Sucesso - mostrar dialog de agradecimento
                openThankYouDialog();
                form.reset();
                
            } catch (error) {
                console.error('Erro ao enviar email:', error);
                console.error('Detalhes do erro:', {
                    status: error.status,
                    text: error.text,
                    message: error.message
                });
                
                // Mensagem de erro mais espec√≠fica
                let errorMessage = 'Ops! Ocorreu um erro ao enviar sua mensagem.\n\n';
                
                if (error.status === 405) {
                    errorMessage += 'Erro 405: M√©todo n√£o permitido.\n';
                    errorMessage += 'Verifique se o EmailJS est√° configurado corretamente.\n\n';
                } else if (error.status === 400) {
                    errorMessage += 'Erro 400: Requisi√ß√£o inv√°lida.\n';
                    errorMessage += 'Verifique se o template est√° configurado corretamente.\n\n';
                } else if (error.status === 401) {
                    errorMessage += 'Erro 401: N√£o autorizado.\n';
                    errorMessage += 'Verifique se a chave p√∫blica est√° correta.\n\n';
                } else {
                    errorMessage += `Erro: ${error.message || 'Erro desconhecido'}\n\n`;
                }
                
                errorMessage += 'Deseja abrir seu cliente de email para enviar manualmente?';
                
                // Em caso de erro, oferecer alternativa
                const useMailto = confirm(errorMessage);
                
                if (useMailto) {
                    const emailjsConfig = typeof EMAILJS_CONFIG !== 'undefined' ? EMAILJS_CONFIG : window.EMAILJS_CONFIG;
                    const toEmail = emailjsConfig ? emailjsConfig.TO_EMAIL : 'misticrochet47@gmail.com';
                    const mailtoLink = `mailto:${toEmail}?subject=Contato via Site - ${encodeURIComponent(formData.nome)}&body=${encodeURIComponent('Nome: ' + formData.nome + '\n\nEmail: ' + formData.email + '\n\nMensagem:\n' + formData.mensagem)}`;
                    window.location.href = mailtoLink;
                }
            } finally {
                // Reabilitar bot√£o
                btn.disabled = false;
                btn.textContent = originalButtonText;
            }
            });
        }
        
        // Garantir que o formul√°rio est√° pronto antes de configurar
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', setupFormHandler);
        } else {
            // DOM j√° est√° pronto
            setupFormHandler();
        }

        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        
        if (!themeToggle) {
            console.error('Theme toggle n√£o encontrado!');
        } else {
            const themeIcon = themeToggle.querySelector('.theme-icon');
            const html = document.documentElement;

            // Verificar tema salvo ou prefer√™ncia do sistema
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initialTheme = savedTheme || (systemPrefersDark ? 'dark' : 'light');

            // Aplicar tema inicial
            if (initialTheme === 'dark') {
                html.setAttribute('data-theme', 'dark');
                themeIcon.textContent = '‚òÄÔ∏è';
            } else {
                html.removeAttribute('data-theme');
                themeIcon.textContent = 'üåô';
            }

            // Toggle de tema
            themeToggle.addEventListener('click', function() {
                const currentTheme = html.getAttribute('data-theme');
                
                if (currentTheme === 'dark') {
                    html.removeAttribute('data-theme');
                    themeIcon.textContent = 'üåô';
                    localStorage.setItem('theme', 'light');
                } else {
                    html.setAttribute('data-theme', 'dark');
                    themeIcon.textContent = '‚òÄÔ∏è';
                    localStorage.setItem('theme', 'dark');
                }
            });

            // Escutar mudan√ßas na prefer√™ncia do sistema
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
                if (!localStorage.getItem('theme')) {
                    if (e.matches) {
                        html.setAttribute('data-theme', 'dark');
                        themeIcon.textContent = '‚òÄÔ∏è';
                    } else {
                        html.removeAttribute('data-theme');
                        themeIcon.textContent = 'üåô';
                    }
                }
            });
        }

        // Modal de Imagens dos Produtos
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const modalOverlay = document.getElementById('modalOverlay');
        const modalClose = document.getElementById('modalClose');
        const modalContent = document.querySelector('.image-modal-content');
        const produtoImgs = document.querySelectorAll('.produto-img[data-image-modal]');

        if (imageModal && modalImage && modalOverlay && modalClose) {
            function openModal(imageSrc, imageAlt) {
                modalImage.src = imageSrc;
                modalImage.alt = imageAlt || 'Imagem ampliada do produto';
                imageModal.classList.add('active');
                document.body.style.overflow = 'hidden'; // Previne scroll do body
                // Focar no bot√£o de fechar para acessibilidade
                setTimeout(() => modalClose.focus(), 100);
            }

            function closeModal() {
                imageModal.classList.remove('active');
                document.body.style.overflow = ''; // Restaura scroll do body
            }

            // Adicionar evento de clique nas imagens dos produtos
            produtoImgs.forEach(img => {
                img.style.cursor = 'pointer';
                img.setAttribute('role', 'button');
                img.setAttribute('tabindex', '0');
                img.addEventListener('click', function() {
                    openModal(this.getAttribute('data-image-modal'), this.getAttribute('alt'));
                });
                // Permitir abrir com Enter/Space
                img.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        openModal(this.getAttribute('data-image-modal'), this.getAttribute('alt'));
                    }
                });
            });

            // Fechar modal ao clicar no overlay (mas n√£o na imagem)
            modalOverlay.addEventListener('click', closeModal);
            modalClose.addEventListener('click', closeModal);
            
            // Prevenir fechar ao clicar na imagem ou no conte√∫do
            if (modalContent) {
                modalContent.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
            
            // Fechar com tecla ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && imageModal.classList.contains('active')) {
                    closeModal();
                }
            });
        } else {
            console.warn('Elementos do modal de imagens n√£o encontrados!');
        }
    </script>
</body>
</html>

